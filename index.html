<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Schedule</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 30px; 
        }
        pre {
            padding: 10px;
            background: #f0f0f0;
            border-radius: 6px;
            white-space: pre-wrap; /* preserves line breaks */
        }
    </style>
</head>
<body>
    <pre id="schedule-box">Loading scheduleâ€¦</pre>

    <script>
        const scheduleBox = document.getElementById("schedule-box");
        const url = "https://raw.githubusercontent.com/dpa68/gr-el-prices/main/schedule";
        let lastContent = "";

        async function loadSchedule() {
            try {
                const response = await fetch(url + "?t=" + new Date().getTime());
                if (!response.ok) throw new Error("Network response was not ok");
                const text = await response.text();
                
                // Only update if content changed
                if (text !== lastContent) {
                    scheduleBox.textContent = text;
                    lastContent = text;
                }
            } catch (err) {
                scheduleBox.textContent = "Error loading schedule.";
                console.error(err);
            }
        }

        // Initial load
        loadSchedule();

        // Refresh every 5 seconds
        setInterval(loadSchedule, 5000);
    </script>
</body>
</html>
